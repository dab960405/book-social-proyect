<div class="book-card-wrapper">
  <div
    class="book-card"
    [class.shareable]="book.shareable"
    [class.archived]="book.archived"
  >
    <!-- Image Container con Overlay -->
    <div class="book-cover-container">
      <img [src]="bookCover" class="book-cover" alt="{{book.title}}">
      <div class="book-cover-overlay">
        <div class="overlay-actions" *ngIf="!manage">
          <button (click)="onShowDetails()" class="overlay-btn" title="Ver detalles">
            <i class="fas fa-circle-info"></i>
          </button>
        </div>
      </div>
      <!-- Status Badge -->
      <div class="status-badge" *ngIf="book.shareable">
        <i class="fas fa-check-circle"></i> Disponible
      </div>
      <div class="status-badge archived" *ngIf="book.archived">
        <i class="fas fa-archive"></i> Archivado
      </div>
    </div>

    <!-- Card Content -->
    <div class="book-content">
      <!-- Title & Author -->
      <div class="book-header">
        <h3 class="book-title" [title]="book.title">
          {{book.title}}
        </h3>
        <p class="book-author">
          <i class="fas fa-user-pen"></i> {{ book.authorName }}
        </p>
      </div>

      <!-- Metadata -->
      <div class="book-metadata">
        <span class="metadata-item" *ngIf="book.isbn">
          <i class="fas fa-barcode"></i> {{book.isbn}}
        </span>
        <span class="metadata-item">
          <i class="fas fa-user"></i> {{book.owner}}
        </span>
      </div>

      <!-- Synopsis -->
      <div class="book-synopsis">
        <p>{{book.synopsis}}</p>
      </div>
    </div>

    <!-- Card Footer -->
    <div class="book-footer">
      <!-- Rating -->
      <div class="rating-container">
        <app-rating [rating]="book.rate || 0"></app-rating>
        <span class="rating-value" *ngIf="book.rate && book.rate > 0">
          {{book.rate | number:'1.1-1'}}
        </span>
      </div>

      <!-- Actions -->
      <div class="action-buttons" *ngIf="!manage">
        <button (click)="onBorrow()" class="action-btn primary" title="Pedir prestado">
          <i class="fas fa-hand-holding-heart"></i>
        </button>
        <button (click)="onAddToWaitingList()" class="action-btn secondary" title="Lista de espera">
          <i class="fas fa-heart"></i>
        </button>
      </div>

      <div class="action-buttons manage" *ngIf="manage">
        <button (click)="onEdit()" class="action-btn edit" title="Editar">
          <i class="fas fa-edit"></i>
        </button>
        <button (click)="onShare()" class="action-btn share" title="Compartir">
          <i class="fas fa-share-nodes"></i>
        </button>
        <button (click)="onArchive()" class="action-btn archive" title="Archivar">
          <i class="fas fa-archive"></i>
        </button>
      </div>
    </div>
  </div>
</div>
